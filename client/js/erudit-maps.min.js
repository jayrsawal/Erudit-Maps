var map=new google.maps.Map(d3.select("#map").node(),{zoom:5,minZoom:3,maxZoom:6,center:new google.maps.LatLng(55,-72),mapTypeId:google.maps.MapTypeId.TERRAIN}),allowed_bounds=new google.maps.LatLngBounds(new google.maps.LatLng(1,-1),new google.maps.LatLng(-1,1)),last_valid_center=map.getCenter();d3.json("stations.json",function(e,t){if(e)throw e;var a=new google.maps.OverlayView;a.onAdd=function(){var e=d3.select(this.getPanes().overlayLayer).append("div").attr("class","stations");a.draw=function(){function a(e){return e=new google.maps.LatLng(e.value[1],e.value[0]),e=n.fromLatLngToDivPixel(e),d3.select(this).style("left",e.x-o+"px").style("top",e.y-o+"px")}var n=this.getProjection(),o=10,s=e.selectAll("svg").data(d3.entries(t)).each(a).enter().append("svg").each(a).attr("class","marker");s.append("circle").attr("r",4.5).attr("cx",o).attr("cy",o),s.append("text").attr("x",o+7).attr("y",o).attr("dy",".31em").text(function(e){return e.key})}},a.setMap(map)});